ops/diagnostics/20260210-005437/api.log:35:api-1  | {"timestamp": "2026-02-09T18:28:37.568271+00:00", "level": "ERROR", "logger": "request", "message": "unhandled_exception", "request_id": "1b199f44-0e11-4315-89ad-bc18e7e0325a", "user_id": 29, "path": "/api/support/threads", "method": "GET", "latency_ms": 28.27, "exception": "  + Exception Group Traceback (most recent call last):\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 81, in collapse_excgroups\n  |     yield\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 783, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/app/app/core/logging.py\", line 81, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/app/core/observability.py\", line 119, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 121, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 107, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 426, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 316, in run_endpoint_function\n    |     return await run_in_threadpool(dependant.call, **values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    |     return await anyio.to_thread.run_sync(func)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    |     result = context.run(func, *args)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/app/routers/support.py\", line 63, in list_support_threads\n    |     if not rbac.can_manage_support(current_user):\n    |            ^^^^^^^^^^^^^^^^^^^^^^^\n    | AttributeError: module 'app.core.rbac' has no attribute 'can_manage_support'\n    +------------------------------------\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/app/core/logging.py\", line 81, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/core/observability.py\", line 119, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 121, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 107, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 426, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 316, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/routers/support.py\", line 63, in list_support_threads\n    if not rbac.can_manage_support(current_user):\n           ^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: module 'app.core.rbac' has no attribute 'can_manage_support'"}
ops/diagnostics/20260210-005437/api.log:44:api-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
ops/diagnostics/20260210-005437/api.log:57:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
ops/diagnostics/20260210-005437/api.log:59:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
ops/diagnostics/20260210-005437/api.log:64:api-1  |     |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:76:api-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:80:api-1  |     |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:92:api-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:95:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
ops/diagnostics/20260210-005437/api.log:96:api-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:97:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:99:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:110:api-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:111:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:113:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:142:api-1  | The above exception was the direct cause of the following exception:
ops/diagnostics/20260210-005437/api.log:155:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
ops/diagnostics/20260210-005437/api.log:157:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
ops/diagnostics/20260210-005437/api.log:162:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:174:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:178:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:190:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:193:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
ops/diagnostics/20260210-005437/api.log:194:api-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:195:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:197:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:208:api-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:209:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:211:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:944:api-1  | {"timestamp": "2026-02-09T18:57:59.474467+00:00", "level": "ERROR", "logger": "request", "message": "unhandled_exception", "request_id": "da93e81a-07d0-4a45-98ac-ece910c4e9c2", "user_id": 29, "path": "/api/document-comments/", "method": "GET", "latency_ms": 20.32, "exception": "  + Exception Group Traceback (most recent call last):\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 81, in collapse_excgroups\n  |     yield\n  |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 192, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 783, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/app/app/core/logging.py\", line 81, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |   File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/app/core/observability.py\", line 119, in dispatch\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    |     raise app_exc from app_exc.__cause__ or app_exc.__context__\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 121, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 107, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 426, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/app/app/routers/document_comments.py\", line 88, in list_document_comments\n    |     result = await db.execute(query)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: object ChunkedIteratorResult can't be used in 'await' expression\n    +------------------------------------\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/app/core/logging.py\", line 81, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/core/observability.py\", line 119, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 87, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 121, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 107, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 426, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/routers/document_comments.py\", line 88, in list_document_comments\n    result = await db.execute(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: object ChunkedIteratorResult can't be used in 'await' expression"}
ops/diagnostics/20260210-005437/api.log:953:api-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
ops/diagnostics/20260210-005437/api.log:966:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
ops/diagnostics/20260210-005437/api.log:968:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
ops/diagnostics/20260210-005437/api.log:973:api-1  |     |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:985:api-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:989:api-1  |     |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:1001:api-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:1004:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
ops/diagnostics/20260210-005437/api.log:1005:api-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1006:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1008:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1019:api-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1020:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1022:api-1  |     |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1039:api-1  | The above exception was the direct cause of the following exception:
ops/diagnostics/20260210-005437/api.log:1052:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
ops/diagnostics/20260210-005437/api.log:1054:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
ops/diagnostics/20260210-005437/api.log:1059:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:1071:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:1075:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:1087:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:1090:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
ops/diagnostics/20260210-005437/api.log:1091:api-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1092:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1094:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1105:api-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1106:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1108:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1123:api-1  | {"timestamp": "2026-02-09T18:58:05.143883+00:00", "level": "ERROR", "logger": "request", "message": "unhandled_exception", "request_id": "127d90af-db83-4653-8921-d7a5ec2d730e", "user_id": 29, "path": "/api/assignments/45/documents/16/review", "method": "POST", "latency_ms": 12.82, "exception": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DatatypeMismatch: column \"reviewed_by_user_id\" is of type uuid but expression is of type integer\nLINE 1: ...status='NEEDS_CLARIFICATION', reviewed_by_user_id=29, review...\n                                                             ^\nHINT:  You will need to rewrite or cast the expression.\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/app/core/logging.py\", line 81, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_utils.py\", line 87, in collapse_excgroups\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/core/observability.py\", line 119, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 95, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 153, in simple_response\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 121, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 107, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 426, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/fastapi/routing.py\", line 314, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/routers/documents.py\", line 397, in review_document\n    log_activity(\n  File \"/app/app/services/activity.py\", line 27, in log_activity\n    db.flush()\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4331, in flush\n    self._flush(objects)\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4466, in _flush\n    with util.safe_reraise():\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4427, in _flush\n    flush_context.execute()\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 85, in save_obj\n    _emit_update_statements(\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 912, in _emit_update_statements\n    c = connection.execute(\n        ^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1419, in execute\n    return meth(\n           ^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 527, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2363, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n  File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 952, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) column \"reviewed_by_user_id\" is of type uuid but expression is of type integer\nLINE 1: ...status='NEEDS_CLARIFICATION', reviewed_by_user_id=29, review...\n                                                             ^\nHINT:  You will need to rewrite or cast the expression.\n\n[SQL: UPDATE assignment_documents SET review_status=%(review_status)s, reviewed_by_user_id=%(reviewed_by_user_id)s, reviewed_at=%(reviewed_at)s, updated_at=%(updated_at)s WHERE assignment_documents.id = %(assignment_documents_id)s]\n[parameters: {'review_status': 'NEEDS_CLARIFICATION', 'reviewed_by_user_id': 29, 'reviewed_at': datetime.datetime(2026, 2, 9, 18, 58, 5, 139647), 'updated_at': datetime.datetime(2026, 2, 9, 18, 58, 5, 141828, tzinfo=datetime.timezone.utc), 'assignment_documents_id': 16}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
ops/diagnostics/20260210-005437/api.log:1130:api-1  | psycopg2.errors.DatatypeMismatch: column "reviewed_by_user_id" is of type uuid but expression is of type integer
ops/diagnostics/20260210-005437/api.log:1136:api-1  | The above exception was the direct cause of the following exception:
ops/diagnostics/20260210-005437/api.log:1149:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
ops/diagnostics/20260210-005437/api.log:1151:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
ops/diagnostics/20260210-005437/api.log:1156:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:1168:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:1172:api-1  |     self.gen.throw(typ, value, traceback)
ops/diagnostics/20260210-005437/api.log:1184:api-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
ops/diagnostics/20260210-005437/api.log:1189:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
ops/diagnostics/20260210-005437/api.log:1190:api-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1191:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1193:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1204:api-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
ops/diagnostics/20260210-005437/api.log:1205:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1207:api-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
ops/diagnostics/20260210-005437/api.log:1227:api-1  |     raise exc_value.with_traceback(exc_tb)
ops/diagnostics/20260210-005437/api.log:1252:api-1  |     self._handle_dbapi_exception(
ops/diagnostics/20260210-005437/api.log:1253:api-1  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
ops/diagnostics/20260210-005437/api.log:1254:api-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
ops/diagnostics/20260210-005437/api.log:1259:api-1  | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) column "reviewed_by_user_id" is of type uuid but expression is of type integer
ops/diagnostics/20260210-005437/api.log:1266:api-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
ops/diagnostics/20260210-005437/grafana.log:37:grafana-1  | logger=provisioning.plugins t=2026-02-09T18:30:40.141381926Z level=error msg="Failed to read plugin provisioning files from directory" path=/etc/grafana/provisioning/plugins error="open /etc/grafana/provisioning/plugins: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:38:grafana-1  | logger=provisioning.notifiers t=2026-02-09T18:30:40.141452009Z level=error msg="Can't read alert notification provisioning files from directory" path=/etc/grafana/provisioning/notifiers error="open /etc/grafana/provisioning/notifiers: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:39:grafana-1  | logger=provisioning.alerting t=2026-02-09T18:30:40.141530676Z level=error msg="can't read alerting provisioning files from directory" path=/etc/grafana/provisioning/alerting error="open /etc/grafana/provisioning/alerting: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:56:grafana-1  | logger=authn.service t=2026-02-09T18:35:43.035616344Z level=info msg="Failed to authenticate request" client=auth.client.basic error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password"
ops/diagnostics/20260210-005437/grafana.log:57:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:35:43.036377719Z level=info msg= error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:59:grafana-1  | logger=authn.service t=2026-02-09T18:35:43.040935594Z level=info msg="Failed to authenticate request" client=auth.client.basic error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password"
ops/diagnostics/20260210-005437/grafana.log:60:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:35:43.041024344Z level=info msg= error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:62:grafana-1  | logger=authn.service t=2026-02-09T18:35:51.659665084Z level=info msg="Failed to authenticate request" client=auth.client.basic error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password"
ops/diagnostics/20260210-005437/grafana.log:63:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:35:51.659739459Z level=info msg= error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:65:grafana-1  | logger=authn.service t=2026-02-09T18:35:51.677389834Z level=info msg="Failed to authenticate request" client=auth.client.basic error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password"
ops/diagnostics/20260210-005437/grafana.log:66:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:35:51.677472167Z level=info msg= error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:71:grafana-1  | logger=authn.service t=2026-02-09T18:38:23.223817043Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password"
ops/diagnostics/20260210-005437/grafana.log:72:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:38:23.22415971Z level=info msg=Unauthorized error="[password-auth.failed] failed to authenticate identity: [password-auth.invalid] invalid password" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:74:grafana-1  | logger=authn.service t=2026-02-09T18:38:28.975651754Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:75:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:38:28.978187087Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:77:grafana-1  | logger=authn.service t=2026-02-09T18:38:35.062862715Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:78:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:38:35.063119924Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:80:grafana-1  | logger=authn.service t=2026-02-09T18:38:36.068943924Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:81:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:38:36.069150507Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:83:grafana-1  | logger=authn.service t=2026-02-09T18:38:47.595128721Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:84:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:38:47.595934471Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:87:grafana-1  | logger=authn.service t=2026-02-09T18:39:08.911148384Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:88:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:08.911510259Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:90:grafana-1  | logger=authn.service t=2026-02-09T18:39:15.188573262Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:91:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:15.189322428Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:93:grafana-1  | logger=authn.service t=2026-02-09T18:39:16.414342304Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:94:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:16.414597596Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:96:grafana-1  | logger=authn.service t=2026-02-09T18:39:16.872198096Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:97:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:16.872349013Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:99:grafana-1  | logger=authn.service t=2026-02-09T18:39:16.999182804Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:100:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:16.999339763Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:102:grafana-1  | logger=authn.service t=2026-02-09T18:39:17.186706929Z level=info msg="Failed to authenticate request" client=auth.client.form error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked"
ops/diagnostics/20260210-005437/grafana.log:103:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T18:39:17.186866096Z level=info msg=Unauthorized error="[password-auth.failed] too many consecutive incorrect login attempts for user - login for user temporarily blocked" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:144:grafana-1  | logger=provisioning.plugins t=2026-02-09T18:39:50.201851875Z level=error msg="Failed to read plugin provisioning files from directory" path=/etc/grafana/provisioning/plugins error="open /etc/grafana/provisioning/plugins: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:145:grafana-1  | logger=provisioning.notifiers t=2026-02-09T18:39:50.201993958Z level=error msg="Can't read alert notification provisioning files from directory" path=/etc/grafana/provisioning/notifiers error="open /etc/grafana/provisioning/notifiers: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:146:grafana-1  | logger=provisioning.alerting t=2026-02-09T18:39:50.202088542Z level=error msg="can't read alerting provisioning files from directory" path=/etc/grafana/provisioning/alerting error="open /etc/grafana/provisioning/alerting: no such file or directory"
ops/diagnostics/20260210-005437/grafana.log:163:grafana-1  | logger=sqlstore.transactions t=2026-02-09T18:49:50.228678291Z level=info msg="Database locked, sleeping then retrying" error="database is locked" retry=0 code="database is locked"
ops/diagnostics/20260210-005437/grafana.log:171:grafana-1  | logger=authn.service t=2026-02-09T19:00:05.119435965Z level=warn msg="Failed to authenticate request" client=auth.client.session error="context canceled"
ops/diagnostics/20260210-005437/grafana.log:172:grafana-1  | logger=context userId=0 orgId=0 uname= t=2026-02-09T19:00:05.119796215Z level=warn msg=Unauthorized error="context canceled" remote_addr=192.168.65.1 traceID=
ops/diagnostics/20260210-005437/grafana.log:174:grafana-1  | logger=tsdb.postgres t=2026-02-09T19:03:01.318941797Z level=error msg="Check health failed" error="pq: SSL is not enabled on the server"
ops/diagnostics/20260210-005437/grafana.log:179:grafana-1  | logger=tsdb.postgres t=2026-02-09T19:03:47.805177555Z level=error msg="Check health failed" error="pq: password authentication failed for user \"zenops\""
ops/diagnostics/20260210-005437/grafana.log:183:grafana-1  | logger=tsdb.postgres t=2026-02-09T19:04:27.06649042Z level=error msg="Check health failed" error="pq: password authentication failed for user \"zenops\""
ops/diagnostics/20260210-005437/db.log:27:db-1  | 2026-02-09 19:03:44.724 UTC [1796] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:29:db-1  | 2026-02-09 19:03:44.731 UTC [1797] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:31:db-1  | 2026-02-09 19:03:47.803 UTC [1805] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:33:db-1  | 2026-02-09 19:03:47.804 UTC [1806] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:35:db-1  | 2026-02-09 19:04:26.987 UTC [1840] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:37:db-1  | 2026-02-09 19:04:27.063 UTC [1841] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:39:db-1  | 2026-02-09 19:04:27.066 UTC [1842] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:41:db-1  | 2026-02-09 19:05:33.252 UTC [1899] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/db.log:43:db-1  | 2026-02-09 19:05:33.353 UTC [1900] FATAL:  password authentication failed for user "zenops"
ops/diagnostics/20260210-005437/watchdog.log:5:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.168506+00:00", "level": "ERROR", "logger": "watchdog", "message": "Health check failed: readyz", "service": "watchdog", "endpoint": "readyz", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:6:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.170564+00:00", "level": "ERROR", "logger": "watchdog", "message": "Health check failed: healthz", "service": "watchdog", "endpoint": "healthz", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:7:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.172552+00:00", "level": "ERROR", "logger": "watchdog", "message": "Failed to fetch OpenAPI spec", "service": "watchdog", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:9:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.174937+00:00", "level": "ERROR", "logger": "watchdog", "message": "Smoke test failed: /readyz", "service": "watchdog", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:10:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.176545+00:00", "level": "ERROR", "logger": "watchdog", "message": "Smoke test failed: /openapi.json", "service": "watchdog", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:11:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.178054+00:00", "level": "ERROR", "logger": "watchdog", "message": "Smoke test failed: /version", "service": "watchdog", "error": "All connection attempts failed"}
ops/diagnostics/20260210-005437/watchdog.log:12:watchdog-1  | {"timestamp": "2026-02-09T18:28:04.178141+00:00", "level": "ERROR", "logger": "watchdog", "message": "Some smoke tests failed", "service": "watchdog"}

=== ERROR COUNTS BY SERVICE ===
  alloy.log: 0
0 errors
  api.log: 96 errors
  db.log: 10 errors
  email-worker.log: 2 errors
  frontend.log: 0
0 errors
  grafana.log: 42 errors
  loki.log: 0
0 errors
  prometheus.log: 0
0 errors
  reverse-proxy.log: 0
0 errors
  watchdog.log: 852 errors
